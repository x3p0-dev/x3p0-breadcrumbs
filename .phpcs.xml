<?xml version="1.0"?>
<ruleset name="X3P0">

	<!-- Only check the PHP files. -->
	<arg name="extensions" value="php"/>

	<!-- Exclude files and folders. -->
	<exclude-pattern>*/(.ideas|.notes|node_modules|public|vendor)/*</exclude-pattern>

	<!--
	########################################################################
	Include relevant WordPress rules. We're not using the entire set because
	many of them conflict with our preferred coding style.
	########################################################################
	-->
	<rule ref="WordPress.CodeAnalysis"/>
	<rule ref="WordPress.DateTime"/>
	<rule ref="WordPress.DB"/>
	<rule ref="WordPress.Security"/>

	<!-- No need to check Yoda conditions. -->
	<rule ref="WordPress.PHP">
		<exclude name="WordPress.PHP.YodaConditions.NotYoda"/>
	</rule>

	<!-- This always recommends `wp_remote_get()` when it shouldn't be used. -->
	<rule ref="WordPress.WP">
		<exclude name="WordPress.WP.AlternativeFunctions.file_get_contents_file_get_contents"/>
	</rule>

	<!--
	########################################################################
	Check PHP compatibility.
	########################################################################
	-->
	<rule ref="PHPCompatibilityWP">
		<!-- Configure PHP version to test. -->
		<config name="testVersion" value="8.1-"/>
		<include-pattern>*\.php$</include-pattern>
	</rule>

	<!--
	########################################################################
	Include PSR12 rules.
	########################################################################
	-->
	<rule ref="PSR12">
		<!-- Tabs forever. -->
		<exclude name="Generic.WhiteSpace.DisallowTabIndent"/>

		<!-- Disabling line length checks for long strings. -->
		<exclude name="Generic.Files.LineLength"/>

		<!-- Allow nicer even spacing for method parameters. -->
		<exclude name="Squiz.Functions.FunctionDeclarationArgumentSpacing.SpaceBeforeEquals"/>
		<exclude name="Squiz.Functions.FunctionDeclarationArgumentSpacing.SpacingAfterHint"/>

		<!-- This is excluded because it catches empty constructors. -->
		<exclude name="Squiz.WhiteSpace.ScopeClosingBrace.ContentBefore"/>
	</rule>

	<!-- Enforce tabbed indentation. -->
	<rule ref="Generic.WhiteSpace.DisallowSpaceIndent"/>

	<!-- Require strict type declarations. -->
	<rule ref="Generic.PHP.RequireStrictTypes"/>

	<!-- Disallow long arrays. -->
	<rule ref="Generic.Arrays.DisallowLongArraySyntax"/>

</ruleset>
