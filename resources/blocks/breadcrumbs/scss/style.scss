////
/// Block stylesheet.
///
/// @author Justin Tadlock <justintadlock@gmail.com>
/// @link   https://github.com/x3p0-dev/x3p0-breadcrumbs
////

///
/// Styles the breadcrumb trail.
///
/// `.wp-block-x3p0-breadcrumbs` is the `<nav>` wrapping element.
/// `.wp-block-x3p0-breadcrumbs__trail` is the `<ul>` element.
/// `.wp-block-x3p0-breadcrumbs__crumb` is the `<li>` element.
/// `.wp-block-x3p0-breadcrumbs__crumb-content` is the `<a>`/`<span>` element.
/// `.wp-block-x3p0-breadcrumbs__crumb-label` is the inner `<span>` element.
///
.wp-block-x3p0-breadcrumbs {
	&,
	&__trail,
	&__crumb,
	&__crumb-content {
		box-sizing: border-box;
		text-indent: 0;
		justify-content: left;
	}

	&__trail,
	&__crumb,
	&__crumb-content {
		display: inherit;
		flex-wrap: inherit;
		align-items: inherit;
		justify-content: inherit;
		gap: inherit;
	}

	// Doubling up on the selectors for higher specificity against themes.
	& &__trail,
	& &__crumb {
		list-style: none;
		margin: 0;
		padding: 0;
		border: none;
		background: transparent;
	}

	// This zeroes out any margin/padding from global padding in core.
	.editor-styles-wrapper &.alignfull > .wp-block-x3p0-breadcrumbs__trail,
	&.alignfull > .wp-block-x3p0-breadcrumbs__trail {
		margin: 0;
		padding: 0;
	}

	// Content justification.
	&.is-content-justification-right  { justify-content: flex-end;   }
	&.is-content-justification-left   { justify-content: flex-start; }
	&.is-content-justification-center { justify-content: center;     }

	// Hides the home crumb label.
	&.hide-home-label :where(
		.wp-block-x3p0-breadcrumbs__crumb--home,
		.wp-block-x3p0-breadcrumbs__crumb--network
	) .wp-block-x3p0-breadcrumbs__crumb-label {
		clip: rect(1px, 1px, 1px, 1px);
		word-wrap: normal !important;
		border: 0;
		clip-path: inset(50%);
		height: 1px;
		margin: -1px;
		overflow: hidden;
		padding: 0;
		position: absolute;
		width: 1px;
	}

	// ---------------------------------------------------------------------
	// Icons.
	// ---------------------------------------------------------------------

	// Defaults for both SVG and text icons.
	&[class*=has-home-] &__crumb--home &__crumb-content::before,
	&[class*=has-sep-] &__crumb:where(:not(:first-child))::before {
		content: '';
		display: inline-block;
	}

	// ---------------------------------------------------------------------
	// Home icon.
	// ---------------------------------------------------------------------

	// Text-based icon.
	&[class*=has-home-text-] &__crumb--home &__crumb-content::before {
		content: var(--breadcrumbs-home, '');
	}

	&.has-home-text-üè† { --breadcrumbs-home: "\1f3e0"; }
	&.has-home-text-üè° { --breadcrumbs-home: "\1f3e1"; }
	&.has-home-text-üèò { --breadcrumbs-home: "\1f3d8"; }

	// SVG-based icon.
	&[class*=has-home-svg-] &__crumb--home &__crumb-content::before {
		mask: no-repeat 50% 50% / cover var(--breadcrumbs-home);
		width: max(1em, 24px);
		height: max(1em, 24px);
		background: currentColor;
	}

	&.has-home-svg-outline {
		--breadcrumbs-home: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 5.69l5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"/></svg>');
	}

	&.has-home-svg-fill {
		--breadcrumbs-home: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>');
	}

	&.has-home-svg-house-outline {
		--breadcrumbs-home: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M19,9.3V4h-3v2.6L12,3L2,12h3v8h6v-6h2v6h6v-8h3L19,9.3z M17,18h-2v-6H9v6H7v-7.81l5-4.5l5,4.5V18z"/><path d="M10,10h4c0-1.1-0.9-2-2-2S10,8.9,10,10z"/></g></g></svg>');
	}

	&.has-home-svg-house-fill {
		--breadcrumbs-home: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><g><rect fill="none" height="24" width="24"/></g><g><path d="M19,9.3V4h-3v2.6L12,3L2,12h3v8h5v-6h4v6h5v-8h3L19,9.3z M10,10c0-1.1,0.9-2,2-2s2,0.9,2,2H10z"/></g></svg>');
	}

	// ---------------------------------------------------------------------
	// Separator icon.
	// ---------------------------------------------------------------------

	// Handles the separator element.
	&__crumb:where(:not(:first-child))::before {
		width: 1em;
		text-align: center;

		// Theme authors can set the separator color in `theme.json` via
		// `settings.custom.x3p0/breadcrumbs.color.separator`.
		color: var(--x3p0-breadcrumbs--color--separator, var(
			--wp--custom--x-3-p-0-breadcrumbs--color--separator,
			currentColor
		));
	}

	// Text-based icon.
	&[class*=has-sep-text-] &__crumb:where(:not(:first-child))::before {
		content: var(--breadcrumbs-sep, '');
	}

	&.has-sep-text-slash        { --breadcrumbs-sep: "\002F"; }
	&.has-sep-text-bar          { --breadcrumbs-sep: "\007C"; }
	&.has-sep-text-middot       { --breadcrumbs-sep: "\00B7"; }
	&.has-sep-text-black-circle { --breadcrumbs-sep: "\25cf"; }
	&.has-sep-text-white-circle { --breadcrumbs-sep: "\25cb"; }

	// SVG-based icon.
	&[class*=has-sep-svg-] &__crumb:where(:not(:first-child))::before {
		mask: no-repeat 50% 50% / cover var(--breadcrumbs-sep);
		height: 1em;
		background: currentColor;
	}

	// https://fonts.google.com/icons?selected=Material+Icons+Outlined:chevron_right:&icon.query=chevron&icon.style=Outlined&icon.set=Material+Icons
	&.has-sep-svg-chevron {
		--breadcrumbs-sep: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"/></svg>');
	}

	// WP next icon
	&.has-sep-svg-chevron-double {
		--breadcrumbs-sep: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false"><path d="M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"></path></svg>');
	}

	// https://fonts.google.com/icons?icon.query=arrow&selected=Material+Icons+Outlined:arrow_right_alt:&icon.set=Material+Icons
	&.has-sep-svg-arrow {
		--breadcrumbs-sep: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"/></svg>');
	}

	// https://fonts.google.com/icons?icon.query=arrow&selected=Material+Symbols+Outlined:arrow_right:FILL@0;wght@400;GRAD@0;opsz@48
	&.has-sep-svg-triangle {
		--breadcrumbs-sep: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 17l5-5-5-5v10z"/></svg>');
	}
}

// Flip icons for RTL.
:where([dir=rtl], .rtl) .wp-block-x3p0-breadcrumbs__crumb:where(:not(:first-child))::before {
	transform: scaleX(-1);
}
